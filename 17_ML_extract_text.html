<!DOCTYPE html>
<html>
<head>
  <title>PDF Text Extraction</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    h1 { color: #333; }
    #feedback { margin-top: 20px; white-space: pre-wrap; background:  #5856ee; padding: 10px; border-radius: 5px; }
  
  .Buttoncontainer {
    display: flex;          /* horizontal layout */
    gap: 10px;              /* space between buttons */
    margin-top: 10px;
  }

  </style>
     <link rel="stylesheet" href="style_adversarial.css">
</head>
<body>
  <h1>PDF Text Extraction</h1>
  
  <input type="file" id="fileInput">

<div class="Buttoncontainer"></div>
    <!button onclick="document.getElementById('fileInput').click()"></button>
    <button onclick="extractText()">Extract Text</button>
</div>
  <h3>Extracted Text:</h3>
  <div id="feedback"></div>

  <script>
async function extractText() {
          const file = document.getElementById("fileInput").files[0];
          if (!file) {
            alert("Please select a file");
            return;
          }

          const formData = new FormData();
          formData.append("file", file);

          document.getElementById("feedback").innerHTML = "<i>Extracting...</i>";

          try {
            const response = await fetch(
              "https://carline-unchiselled-superlaryngeally.ngrok-free.dev/extracttext",
              { method: "POST", body: formData }
            );

            if (!response.ok) {
              // Try to read JSON error from backend
              let errMsg = `Server error: ${response.status}`;
              try {
                const errData = await response.json();
                if (errData.detail) errMsg = errData.detail;
              } catch (e) {
                // ignore JSON parse errors
              }
              throw new Error(errMsg);
            }

            const data = await response.json();
            document.getElementById("feedback").textContent = data.text;

          } catch (err) {
            document.getElementById("feedback").innerHTML =
              `<span style="color:red;">Error: ${err.message}</span>`;
          }
        }

  </script>
</body>
</html>
